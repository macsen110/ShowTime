webpackJsonp([1],{

/***/ 9:
/***/ function(module, exports) {

	module.exports = "<script id=\"wait_unbind_card_template\" type=\"text/html\">\n    <div class=\"unbind-card-container\">\n        <a class=\"widget-tip-box\" href=\"https://h5.shqmxx.com/Template/Resource.aspx?Pri=QM.CSFP.77.DIS.UserManage-Binding&customerId=77&openId={{uid}}&userId=2d8ecdf71a284b1aa51556c9b5f2a43e&CheckOAuth=unAttention&rid=86899&uiserviceId=gh_f6090761f9dc&ForwardUIUserId=oTqovuHDy5NjAboPiXrhTJvls50o&IsMenu=1&applicationId=2b0ff89f27584e3ab81d44d060a4271e&IsMenu=1\">\n            <p>绑定就诊卡，智能提醒，轻松候诊</p>\n            <i class=\"sign\"></i>\n        </a>\n        <div class=\"wrap-list-test\">\n            \n            <ul class=\"list\">\n                <li class=\"item\">\n                    <p class=\"desc\"><span class=\"fr\"><i class=\"icon\"></i><em class=\"address\">门诊2楼抽血中心</em></span>验血</p>\n                </li>\n                <li class=\"item\">\n                    <p class=\"desc\"><span class=\"fr\"><i class=\"icon\"></i><em class=\"address\">门诊1楼B超</em></span>B超</p>\n                </li>\n                <li class=\"item\">\n                    <p class=\"desc\"><span class=\"fr\"><i class=\"icon\"></i><em class=\"address\">门诊1楼标本收集处</em></span>尿检</p>\n                </li>\n                <li class=\"item\">\n                    <p class=\"desc\"><span class=\"fr\"><i class=\"icon\"></i><em class=\"address\">门诊1楼产科A区</em></span>胎心</p>\n                </li>\n                <li class=\"item\">\n                    <p class=\"desc\"><span class=\"fr\"><i class=\"icon\"></i><em class=\"address\">门诊2楼心电图室</em></span>心电图</p>\n                </li>\n            </ul>\n        </div>\n    </div>\n</script>\n<script id=\"wait_bind_card_template\" type=\"text/html\">\n    <div class=\"bind-card-container\">\n        <div class=\"widget-head-avatar\">\n            <img class=\"avatar\" src=\"images/icon_avatar_2.png\" alt=\"avatar\">\n            <div class=\"content\">\n                <p>{{isToday ? '今日产检' : '下次产检'}}<em class=\"status\">已孕{{weekPregnant}}周</em></p>\n                <p>{{queueDate}} {{checkWeek}} {{checkTime}}</p>\n            </div>\n        </div>\n        {{if isToday }}\n        <div class=\"tip-container\">\n            <i class=\"icon\"></i>\n            已推荐候诊顺序，若有过号项请咨询护士台\n        </div>\n        <ul class=\"list\">\n            {{each queueList}}\n            {{if $value.id != 5 && $value.id !=6 }}\n            <li class=\"item type-{{$value.id}} status-{{$value.queueStatus}} {{$value.queueNumberCurrent == $value.queueNumberMine ? 'cur' : ''}}\">\n                <i class=\"icon\"></i>\n                <div class=\"content\">\n                    <p class=\"desc\"><em class=\"test-item-key\">检查项目</em>{{if $value.queueStatus == 1}}<strong>(请尽快取号)</strong>{{/if}}<em class=\"icon icon-location\"></em></p>\n                    <p class=\"desc\">{{$value.name}}<span class=\"fr\">{{$value.departmentAddress}}</span></p>\n                    {{if $value.queueStatus != 1}}\n                    \n                    <ul class=\"queue-list\">\n                            <li class=\"item\">\n                            <p>{{$value.queueNumberCurrent}}</p>\n                            <p>当前叫号</p>\n                        </li>\n                        <li class=\"item\">\n                            <p>{{$value.queueNumberMine}}</p>\n                            <p>我的诊号</p>\n                        </li>\n                        <li class=\"item\">\n                            {{if $value.queueStatus == 2}}\n                            <p>{{$value.queueNumberCurrent == $value.queueNumberMine ? '已到号' : $value.queueWaitingNumber}}</p> \n                            {{/if}}\n                            {{if $value.queueStatus == 3}}<p>已过号</p> {{/if}}\n                            {{if $value.queueStatus == 4}}<p>已完成</p> {{/if}}\n                            {{if $value.queueStatus == 5}}<p>已到期</p> {{/if}}\n                            <p>前面人数</p>\n                        </li>\n                    </ul>\n                    {{/if}}\n                </div>\n            </li>\n            {{/if}}\n            {{if $value.id == 5 || $value.id ==6}}\n            <li class=\"item type-{{$value.id}}\">\n                <i class=\"icon\"></i>\n                <div class=\"content\">\n                    <p class=\"desc\"><em class=\"test-item-key\">检查项目</em><strong>(现场排队)</strong><em class=\"icon icon-location\"></em></p>\n                    <p class=\"desc\">{{$value.name}}<span class=\"fr\">{{$value.departmentAddress}}</span></p>\n                </div>\n            </li>\n            {{/if}}\n            {{/each}}\n        </ul>\n        {{/if}}\n        {{if !isToday }}\n        <ul class=\"list\">\n            {{each queueList}}\n            <li class=\"item type-{{$value.id}} status-{{$value-queueStatus}}\">\n                <i class=\"icon\"></i>\n                <div class=\"content\">\n                    <p class=\"desc\"><em class=\"test-item-key\">检查项目</em>{{if $value.id == 5 || $value.id == 6}}<strong>(现场排队)</strong>{{/if}}<em class=\"icon icon-location\"></em></p>\n                    <p class=\"desc\">{{$value.name}}<span class=\"fr\">{{$value.departmentAddress}}</span></p>\n                    \n                </div>\n            </li>\n            {{/each}}\n        </ul>\n        {{/if}}\n    </div>\n</script>\n<div class=\"widget-bottom-nav\">\n    <ul class=\"container\">\n        <li class=\"item bind-location\" data-href=\"antenatal\"><a href=\"javascript:void(0)\">我的产检</a></li>\n        <li class=\"item active\" ><a href=\"javascript:void(0)\">候诊</a></li>\n    </ul>\n</div>\n";

/***/ },

/***/ 18:
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
	 * Created by wudi on 15/11/30.
	 */
	!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(1),__webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function($, template) {    
	    //init page
	    
	    var pageInitObj = {
	        $rootDom: $('#page_container'),
	        isBindCard: false,
	        ready: function (stateObj, data) {
	            var self = this;
	            var tplScript = __webpack_require__(9);
	            if (STORE.curPathName == stateObj.pageName) {
	                STORE.setRouter(stateObj, self);
	                self.show(tplScript, data);
	            }
	        },
	        show: function (tplScript, data) {
	            var self = this;
	            self.$rootDom.html(tplScript);
	            var html = self.isBindCard ? template('wait_bind_card_template', data) 
	            : template('wait_unbind_card_template', data);            
	            self.$rootDom.prepend(html);
	            self.bindUI(); 
	        },
	        setPageInfo: function () {
	            document.title = "我的候诊"
	        },
	        bindUI: function () {
	            var self = this;
	            self.setPageInfo();
	            self.$rootDom.addClass('page-wait-doctor visibile');
	            if (self.isBindCard) {
	                var $unNeedQueue = self.$rootDom.find('.list .type-5, .list .type-6');
	                $unNeedQueue.find('.test-item-key').text('检验项目')
	                if ($unNeedQueue.length) {
	                    $unNeedQueue.remove();
	                    $('.list').before('<ul class="list"></ul>');
	                    if ($unNeedQueue.length > 1) {
	                        $unNeedQueue.forEach(function (item, idx) {
	                            $('.list').eq(0).append(item)    
	                        })    
	                    }
	                    else {
	                        $('.list').eq(0).append($unNeedQueue)
	                    }
	                }
	            }
	            else {
	                $('.tooltip-container .item').on('click', function () {
	                    var index = $(this).index();
	                    $(this).addClass('cur').siblings().removeClass('cur');
	                    $('.unbind-card-container .list').eq(index).addClass('cur').siblings().removeClass('cur')
	                })            
	            }
	                    
	        },
	        init: function (stateObj) {
	            var self = this;
	            var profileInfo = APP.profileInfo;
	            if (profileInfo.emStatus == 1) self.unbindCard(stateObj) 
	            if (profileInfo.emStatus == 2) self.bindCard(stateObj);
	        },
	        bindCard: function (stateObj) {
	            //this need to request bindCard ajax
	            var self = this;
	            self.isBindCard = true;
	            var profileInfo = APP.profileInfo;
	            var postData = {
	                uid: profileInfo.uid,
	                token: APP.tools.encryptedString(JSON.parse(localStorage.getItem('yfyPublic'))),
	                cardNo: profileInfo.cardNo
	            }
	            $.ajax({
	                url: APP.host.api + '/infanthospital/getQueueInfo',
	                type: 'post',
	                data: JSON.stringify(postData),
	                contentType: 'application/json',
	                success: function (res) {
	                    res = JSON.parse(res);
	                    if (res.status == 0) {
	                        res = self._todoResult(res);
	                        self.ready(stateObj, res);
	                        return;
	                    }
	                    APP.ui.Prompt({content: res.description}).render()
	                }
	            })
	        },
	        unbindCard: function (stateObj) {
	            var self = this;
	            self.bindCard = false;
	            self.ready(stateObj, {uid: APP.uid});            
	        },
	        _todoResult: function (result) {
	            var self = this;
	            if (self.isBindCard) {
	                result = result;
	            }
	            else {
	                result = result
	            }
	            return result
	        },
	        destroy: function () {
	            //如果有事件绑定的话, 解除事件绑定
	            this.$rootDom.html('');
	            this.$rootDom.removeClass('visibile page-wait-doctor');
	            this.$rootDom.html('');
	        }
	    }
	    
	    
	    return pageInitObj;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))

/***/ }

});